<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rent a Mate</title>
</head>
<body>
    <h1>Mate List</h1>
    <ul id="mate-list">
        <!-- mate items will be dynamically added here  -->
    </ul>

    <form id="add-mate-form">
        <label for="name">Mate Name:</label>
        <input type="text" id="mate_name" name="mate_name"> 
        <button type="submit">Add</button>
    </form> 
    <script>
          const mate_container = document.getElementById('mate-list');
          const mate_name = document.getElementById('mate_name');


          function render_mate_list() {
                fetch(`/search_mate/`, {
                        body: JSON.stringify(mate_name)
                    }    
                )
                    .then(response => response.json())
                    .then(mate_list => {
                        mate_container.innerHTML = '';
                        mate_list.forEach(mate => {
                            const listItem = document.createElement('li');
                            listItem.textContent = `${mate.name} (Date: ${mate.date})`;
                            mate_container.appendChild(listItem);
                        });
                    });

            //          addTodoForm.addEventListener('submit', function (event) {
            //     event.preventDefault();
            //     const newTodoIdInput = document.getElementById('new-todo-id');
            //     const newTodoActivityInput = document.getElementById('new-todo-activity');

            //     const newTodo = {
            //         "id": parseInt(newTodoIdInput.value),
            //         "activity": newTodoActivityInput.value
            //     };

            //     fetch('/todo', {
            //         method: 'POST',
            //         headers: {
            //             'Content-Type': 'application/json',
            //         },
            //         body: JSON.stringify(newTodo),
            //     })
            //     .then(response => response.json())
            //     .then(() => {
            //         newTodoIdInput.value = '';
            //         newTodoActivityInput.value = '';
            //         renderTodoList();
            //     });
            // });

            addTodoForm.addEventListener('submit', function (event) {
                event.preventDefault();
                const newTodoIdInput = document.getElementById('new-todo-id');
                const newTodoActivityInput = document.getElementById('new-todo-activity');

                const newTodo = {
                    "id": parseInt(newTodoIdInput.value),
                    "activity": newTodoActivityInput.value
                };

                fetch('/todo', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(newTodo),
                })
                .then(response => response.json())
                .then(() => {
                    newTodoIdInput.value = '';
                    newTodoActivityInput.value = '';
                    renderTodoList();
                });
            });
            }
    </script> 
</body>
</html>